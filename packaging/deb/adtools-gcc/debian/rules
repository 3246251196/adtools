#!/usr/bin/make -f

export GCC_VERSION=4.9.1
export GCC_SRC_DIR=../../branches/gcc/4.9.x/

MAKE_DIR=../../../gcc-build
PWD=$(shell pwd)

override_dh_auto_build:
	$(MAKE) -C $(MAKE_DIR) SRC_DIR=$(GCC_SRC_DIR) PREFIX=/opt/adtools VERSION=$(GCC_VERSION)

override_dh_auto_install:
	$(MAKE) -C $(MAKE_DIR)/cross-$(GCC_VERSION) DESTDIR=$(PWD)/debian/adtools-gcc install
	rm -f debian/adtools-gcc/opt/adtools/share/info/dir

# We don't have any useful tests
override_dh_auto_test:

# Don't strip ppc files
override_dh_strip:
	dh_strip --exclude=ppc-amigaos/lib --exclude=ppc-amigaos/SDK --exclude=lib/gcc/ppc-amigaos

# As per default, but ignore ppc files
override_dh_makeshlibs:
	dh_makeshlibs --exclude=ppc-amigaos/lib --exclude=lib/gcc/ppc-amigaos

# As per default, but ignore ppc files
override_dh_shlibdeps:
	dh_shlibdeps --exclude=ppc-amigaos/lib --exclude=lib/gcc/ppc-amigaos

%:
	echo $@
	dh $@


